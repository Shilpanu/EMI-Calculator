<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EMI Calculator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 1200px;
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(to right, #4a6fa5, #2c3e50);
            color: white;
            padding: 25px 40px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 1.1rem;
        }
        
        .calculator-container {
            display: flex;
            flex-wrap: wrap;
            padding: 0;
        }
        
        .input-section {
            flex: 1;
            min-width: 400px;
            padding: 40px;
            background: #f8f9fa;
            border-right: 1px solid #eedada;
        }
        
        .result-section {
            flex: 1.5;
            min-width: 500px;
            padding: 40px;
        }
        
        .input-group {
            margin-bottom: 30px;
        }
        
        .input-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
            font-size: 1.1rem;
        }
        
        .slider-container {
            position: relative;
            margin-top: 10px;
        }
        
        .slider-container input[type="range"] {
            width: 100%;
            height: 10px;
            border-radius: 5px;
            background: #e0e0e0;
            outline: none;
        
        }
        
        .slider-container input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #4a6fa5;
            cursor: pointer;
            border: 3px solid white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        .input-with-unit {
            position: relative;
        }
        
        .input-with-unit input {
            width: 100%;
            padding: 15px 20px;
            padding-right: 60px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .input-with-unit input:focus {
            border-color: #4a6fa5;
            outline: none;
            box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.1);
        }
        
        .unit {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: #666;
            font-weight: 600;
        }
        
        .value-display {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            font-size: 0.9rem;
            color: #666;
        }
        
        .calculate-btn {
            background: linear-gradient(to right, #4a6fa5, #2c3e50);
            color: white;
            border: none;
            padding: 18px;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            margin-top: 20px;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .calculate-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 15px rgba(74, 111, 165, 0.3);
        }
        
        .calculate-btn:active {
            transform: translateY(0);
        }
        
        /* Result Cards */
        .result-cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .result-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            border: 1px solid #eee;
            transition: transform 0.3s;
        }
        
        .result-card:hover {
            transform: translateY(-5px);
        }
        
        .result-card h3 {
            font-size: 1rem;
            color: #666;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .result-value {
            font-size: 2.2rem;
            font-weight: 700;
            color: #2c3e50;
        }
        
        .result-unit {
            font-size: 1rem;
            color: #666;
            margin-left: 5px;
        }
        
        /* Breakdown Section */
        .breakdown {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
        }
        
        .breakdown h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }
        
        .breakdown-bar {
            height: 12px;
            background: #e0e0e0;
            border-radius: 6px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .bar-segment {
            height: 100%;
            float: left;
        }
        
        .bar-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
        }
        
        .bar-label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
        }
        
        .color-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        
        /* Amortization Table */
        .table-container {
            margin-top: 40px;
            overflow-x: auto;
        }
        
        .table-container h2 {
            color: #6db2f7;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        th {
            background: #2c3e50;
            color: white;
            padding: 18px 15px;
            text-align: center;
            font-weight: 600;
        }
        
        td {
            padding: 15px;
            text-align: center;
            border-bottom: 1px solid #eee;
        }
        
        tr:nth-child(even) {
            background: #f8f9fa;
        }
        
        tr:hover {
            background: #eef5ff;
        }
        
        .year-row {
            background: #eef5ff !important;
            font-weight: 600;
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 25px;
            background: #f8f9fa;
            color: #666;
            font-size: 0.9rem;
            border-top: 1px solid #eee;
        }
        
        @media (max-width: 992px) {
            .calculator-container {
                flex-direction: column;
            }
            
            .input-section, .result-section {
                min-width: 100%;
                padding: 30px;
            }
            
            .input-section {
                border-right: none;
                border-bottom: 1px solid #eee;
            }
            
            .result-cards {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 576px) {
            .result-cards {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
                flex-direction: column;
                gap: 10px;
            }
            
            th, td {
                padding: 10px 8px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-calculator"></i> EMI Calculator</h1>
            <p>Calculate your Equated Monthly Installment with detailed breakdown</p>
        </div>
        
        <div class="calculator-container">
            <div class="input-section">
                <div class="input-group">
                    <label for="loanAmount"><i class="fas fa-money-bill-wave"></i> Loan Amount</label>
                    <div class="input-with-unit">
                        <input type="number" id="loanAmount" min="1000" max="50000000" value="500000" step="1000">
                        <span class="unit">₹</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" id="loanAmountSlider" min="1000" max="50000000" value="500000" step="1000">
                    </div>
                    <div class="value-display">
                        <span>₹ 1,000</span>
                        <span>₹ 5,00,00,000</span>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="interestRate"><i class="fas fa-percentage"></i> Interest Rate (p.a.)</label>
                    <div class="input-with-unit">
                        <input type="number" id="interestRate" min="1" max="30" value="8.5" step="0.1">
                        <span class="unit">%</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" id="interestRateSlider" min="1" max="30" value="8.5" step="0.1">
                    </div>
                    <div class="value-display">
                        <span>1%</span>
                        <span>30%</span>
                    </div>
                </div>
                
                <div class="input-group">
                    <label for="loanTenure"><i class="fas fa-calendar-alt"></i> Loan Tenure</label>
                    <div class="input-with-unit">
                        <input type="number" id="loanTenure" min="1" max="30" value="20">
                        <span class="unit">Years</span>
                    </div>
                    <div class="slider-container">
                        <input type="range" id="loanTenureSlider" min="1" max="30" value="20" step="1">
                    </div>
                    <div class="value-display">
                        <span>1 Year</span>
                        <span>30 Years</span>
                    </div>
                </div>
                
                <button id="calculateBtn" class="calculate-btn">
                    <i class="fas fa-calculator"></i> Calculate EMI
                </button>
            </div>
            
            <div class="result-section">
                <div class="result-cards">
                    <div class="result-card">
                        <h3>Monthly EMI</h3>
                        <div class="result-value" id="emiValue">₹ 4,335</div>
                        <div class="result-unit">per month</div>
                    </div>
                    
                    <div class="result-card">
                        <h3>Total Interest</h3>
                        <div class="result-value" id="totalInterest">₹ 5,40,518</div>
                        <div class="result-unit">payable</div>
                    </div>
                    
                    <div class="result-card">
                        <h3>Total Payment</h3>
                        <div class="result-value" id="totalPayment">₹ 10,40,518</div>
                        <div class="result-unit">(Principal + Interest)</div>
                    </div>
                </div>
                
                <div class="breakdown">
                    <h2><i class="fas fa-chart-pie"></i> Payment Breakdown</h2>
                    <div class="breakdown-bar" id="breakdownBar">
                        <div class="bar-segment" id="principalBar" style="width: 48%; background: #4a6fa5;"></div>
                        <div class="bar-segment" id="interestBar" style="width: 52%; background: #e74c3c;"></div>
                    </div>
                    <div class="bar-labels">
                        <div class="bar-label">
                            <div class="color-dot" style="background: #4a6fa5;"></div>
                            <span>Principal: <span id="principalPercent">48%</span></span>
                        </div>
                        <div class="bar-label">
                            <div class="color-dot" style="background: #e74c3c;"></div>
                            <span>Interest: <span id="interestPercent">52%</span></span>
                        </div>
                    </div>
                </div>
                
                <div class="table-container">
                    <h2><i class="fas fa-table"></i> Amortization Schedule (First 12 Months)</h2>
                    <table id="amortizationTable">
                        <thead>
                            <tr>
                                <th>Month</th>
                                <th>EMI</th>
                                <th>Principal</th>
                                <th>Interest</th>
                                <th>Balance</th>
                            </tr>
                        </thead>
                        <tbody id="amortizationBody">
                            <!-- Table rows will be inserted here by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>© 2023 EMI Calculator | Note: This calculator provides estimates. Actual loan terms may vary based on the lender's policies.</p>
        </div>
    </div>

    <script>
        // DOM Elements
        const loanAmountInput = document.getElementById('loanAmount');
        const loanAmountSlider = document.getElementById('loanAmountSlider');
        const interestRateInput = document.getElementById('interestRate');
        const interestRateSlider = document.getElementById('interestRateSlider');
        const loanTenureInput = document.getElementById('loanTenure');
        const loanTenureSlider = document.getElementById('loanTenureSlider');
        const calculateBtn = document.getElementById('calculateBtn');
        
        const emiValue = document.getElementById('emiValue');
        const totalInterest = document.getElementById('totalInterest');
        const totalPayment = document.getElementById('totalPayment');
        const principalPercent = document.getElementById('principalPercent');
        const interestPercent = document.getElementById('interestPercent');
        const principalBar = document.getElementById('principalBar');
        const interestBar = document.getElementById('interestBar');
        const amortizationBody = document.getElementById('amortizationBody');
        
        // Format currency in Indian Rupees
        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-IN', {
                maximumFractionDigits: 0,
                style: 'currency',
                currency: 'INR'
            }).format(amount);
        }
        
        // Format number with commas
        function formatNumber(num) {
            return num.toLocaleString('en-IN', {
                maximumFractionDigits: 0
            });
        }
        
        // Calculate EMI
        function calculateEMI(principal, annualRate, years) {
            const monthlyRate = annualRate / 12 / 100;
            const months = years * 12;
            
            if (monthlyRate === 0) {
                return principal / months;
            }
            
            const emi = principal * monthlyRate * 
                Math.pow(1 + monthlyRate, months) / 
                (Math.pow(1 + monthlyRate, months) - 1);
            
            return emi;
        }
        
        // Generate amortization schedule
        function generateAmortizationSchedule(principal, annualRate, years, emi) {
            const monthlyRate = annualRate / 12 / 100;
            const months = years * 12;
            let balance = principal;
            let schedule = [];
            
            for (let month = 1; month <= Math.min(12, months); month++) {
                const interest = balance * monthlyRate;
                const principalPaid = emi - interest;
                balance -= principalPaid;
                
                schedule.push({
                    month: month,
                    emi: emi,
                    principal: principalPaid,
                    interest: interest,
                    balance: Math.max(balance, 0)
                });
            }
            
            return schedule;
        }
        
        // Update all calculations
        function updateCalculations() {
            // Get input values
            const principal = parseFloat(loanAmountInput.value);
            const annualRate = parseFloat(interestRateInput.value);
            const years = parseFloat(loanTenureInput.value);
            
            // Calculate EMI
            const emi = calculateEMI(principal, annualRate, years);
            const totalMonths = years * 12;
            const totalPayable = emi * totalMonths;
            const totalInterestAmount = totalPayable - principal;
            
            // Update result cards
            emiValue.textContent = formatCurrency(emi);
            totalInterest.textContent = formatCurrency(totalInterestAmount);
            totalPayment.textContent = formatCurrency(totalPayable);
            
            // Update breakdown percentages
            const principalPercentage = Math.round((principal / totalPayable) * 100);
            const interestPercentage = 100 - principalPercentage;
            
            principalPercent.textContent = `${principalPercentage}%`;
            interestPercent.textContent = `${interestPercentage}%`;
            
            principalBar.style.width = `${principalPercentage}%`;
            interestBar.style.width = `${interestPercentage}%`;
            
            // Generate and display amortization schedule
            const schedule = generateAmortizationSchedule(principal, annualRate, years, emi);
            displayAmortizationSchedule(schedule);
        }
        
        // Display amortization schedule
        function displayAmortizationSchedule(schedule) {
            amortizationBody.innerHTML = '';
            
            schedule.forEach(row => {
                const tr = document.createElement('tr');
                
                // Highlight first row
                if (row.month === 1) {
                    tr.classList.add('year-row');
                }
                
                tr.innerHTML = `
                    <td>${row.month}</td>
                    <td>${formatCurrency(row.emi)}</td>
                    <td>${formatCurrency(row.principal)}</td>
                    <td>${formatCurrency(row.interest)}</td>
                    <td>${formatCurrency(row.balance)}</td>
                `;
                
                amortizationBody.appendChild(tr);
            });
        }
        
        // Sync sliders with inputs
        loanAmountInput.addEventListener('input', function() {
            loanAmountSlider.value = this.value;
            updateCalculations();
        });
        
        loanAmountSlider.addEventListener('input', function() {
            loanAmountInput.value = this.value;
            updateCalculations();
        });
        
        interestRateInput.addEventListener('input', function() {
            interestRateSlider.value = this.value;
            updateCalculations();
        });
        
        interestRateSlider.addEventListener('input', function() {
            interestRateInput.value = this.value;
            updateCalculations();
        });
        
        loanTenureInput.addEventListener('input', function() {
            loanTenureSlider.value = this.value;
            updateCalculations();
        });
        
        loanTenureSlider.addEventListener('input', function() {
            loanTenureInput.value = this.value;
            updateCalculations();
        });
        
        // Calculate button
        calculateBtn.addEventListener('click', updateCalculations);
        
        // Add keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') {
                updateCalculations();
            }
            if (e.key === 'r' || e.key === 'R') {
                resetCalculator();
            }
        });
        
        // Reset calculator function
        function resetCalculator() {
            loanAmountInput.value = 500000;
            loanAmountSlider.value = 500000;
            interestRateInput.value = 8.5;
            interestRateSlider.value = 8.5;
            loanTenureInput.value = 20;
            loanTenureSlider.value = 20;
            updateCalculations();
        }
        
        // Add a reset button dynamically
        const resetBtn = document.createElement('button');
        resetBtn.innerHTML = '<i class="fas fa-redo"></i> Reset Calculator';
        resetBtn.style.cssText = `
            background: linear-gradient(to right, #95a5a6, #7f8c8d);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            font-size: 1rem;
            cursor: pointer;
            margin-top: 15px;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        `;
        resetBtn.addEventListener('click', resetCalculator);
        document.querySelector('.input-section').appendChild(resetBtn);
        
        // Initialize calculator
        window.addEventListener('load', function() {
            updateCalculations();
            
            // Add animation to result cards on load
            const resultCards = document.querySelectorAll('.result-card');
            resultCards.forEach((card, index) => {
                card.style.opacity = '0';
                card.style.transform = 'translateY(20px)';
                
                setTimeout(() => {
                    card.style.transition = 'opacity 0.5s, transform 0.5s';
                    card.style.opacity = '1';
                    card.style.transform = 'translateY(0)';
                }, index * 100);
            });
        });
        
        // Add real-time calculation as user types
        const inputs = [loanAmountInput, interestRateInput, loanTenureInput];
        inputs.forEach(input => {
            input.addEventListener('input', function() {
                clearTimeout(this.timer);
                this.timer = setTimeout(() => updateCalculations(), 300);
            });
        });
        
        // Add tooltips
        function addTooltips() {
            const tooltips = [
                { element: loanAmountInput, text: 'The total amount you want to borrow' },
                { element: interestRateInput, text: 'Annual interest rate charged by the lender' },
                { element: loanTenureInput, text: 'Loan repayment period in years' }
            ];
            
            tooltips.forEach(tooltip => {
                tooltip.element.title = tooltip.text;
                tooltip.element.addEventListener('mouseenter', function() {
                    showTooltip(this, tooltip.text);
                });
                tooltip.element.addEventListener('mouseleave', hideTooltip);
            });
        }
        
        function showTooltip(element, text) {
            const tooltip = document.createElement('div');
            tooltip.className = 'tooltip';
            tooltip.textContent = text;
            tooltip.style.cssText = `
                position: absolute;
                background: #2c3e50;
                color: white;
                padding: 8px 12px;
                border-radius: 6px;
                font-size: 0.9rem;
                z-index: 1000;
                max-width: 250px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            `;
            
            const rect = element.getBoundingClientRect();
            tooltip.style.top = (rect.top - 40) + 'px';
            tooltip.style.left = (rect.left + rect.width/2 - 100) + 'px';
            
            document.body.appendChild(tooltip);
            
            element.tooltip = tooltip;
        }
        
        function hideTooltip() {
            const tooltip = document.querySelector('.tooltip');
            if (tooltip) {
                tooltip.remove();
            }
        }
        
        // Initialize tooltips
        addTooltips();
    </script>
</body>
</html>
    

